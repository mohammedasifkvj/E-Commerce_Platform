exports.signup =async (req,res)=>{
  try{
      const name = req.body.name
      const email = req.body.email
      const phone = req.body.phone
      const password = req.body.password

      const oldUser =await User.findOne({email});

      if(oldUser){
          return res.redirect(`/signup?error=${encodeURIComponent("User already exists. Please  log in with another mail!")}`)
      }else{
      const hash = await bcrypt.hash(password,12);
      const user = await User.create(
          {
              name,
              email,
              password:hash,
              phone
          }
      )
      if (user) {
          return res.redirect(
            `/login?success=${encodeURIComponent("Successfully your account created.Please login")}`
          );
      } 
    }
  }catch(e){
      console.log(e);
  }
}